<?php
/**
 * QCERTController
 * 
 * Default CI controller is exptended so that the admin view files can have a layout structure and the view files will be loaded using 
 * the render() method in this controller
 *
 */
class QCERT_Controller extends CI_Controller {

    // Not needed unless setting things
    public function __construct()
    {
    	ini_set('display_errors',1);
    	
        parent::__construct();
        if($this->router->class != 'login' ){
        	//$this->check_session();
        }
    }
    
    public function check_session(){
    	if(!$this->session->userdata('admin_username')){
			redirect(base_url().'login');
		}
    }
    
    public function render($view, $extra=NULL){
    	$data['asset_url'] = base_url().'assets/';
    	$data['head'] = $this->load->view('head',$data, TRUE);
    	$data['logged_in'] = $this->load->view('logged_in',$data, TRUE);
    	$data['footer'] = $this->load->view('footer',$data,TRUE);
    	
    	//append the extra data we need
    	if(is_array($extra)){
    		$data = array_merge($data, $extra);
    	}
    	
    	$data['content'] = $this->load->view($view, $data,TRUE);
    	//$data['content'] = NULL;
    	$this->load->view('body', $data);
    }
    
    public function loginrender($view, $extra=NULL){
    	$data['asset_url'] = base_url().'assets/';
    	    	
    	$this->load->view($view, $data);
    	
    }
    
    public function paginate($total, $url, $segment = PAGE_SEGMENT){
    	$config['per_page'] = PER_PAGE;
    	$config['base_url'] = $url.'/';
		$config['total_rows'] = $total;
		$config['uri_segment'] = $segment;
		$this->pagination->initialize($config);
    }
    
  	
    
    
    

} 



?>