<?php
include APPPATH.'third_party/geoip/geoip.inc';
final class Geoiplocate{

	public $gi;
	
	public function __construct(){
		$this->gi = geoip_open(APPPATH.'third_party/geoip/GeoIP.dat',GEOIP_STANDARD);
	}

	public function __destruct(){}

	
	public function getCountry($host){
		$code = geoip_country_code_by_addr($this->gi, $host);
		$name = geoip_country_name_by_addr($this->gi, $host);
		
		if($code){
			$status = 'OK';
		}else{
			$status = 'INVALID';
		}
		
		return array('status_code' => $status, 'country_code' => $code, 'country_name' => $name, 'ip_address' => $host);
		
	}

	
	
}
?>